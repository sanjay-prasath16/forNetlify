var n=require("react"),e=require("@11labs/client");function t(){return t=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},t.apply(null,arguments)}exports.useConversation=function(r){var u=n.useRef(null),o=n.useRef(null),c=n.useState("disconnected"),i=c[0],l=c[1],s=n.useState("listening"),a=s[0],f=s[1];return n.useEffect(function(){return function(){var n;null==(n=u.current)||n.endSession()}},[]),{startSession:function(n){try{var c,i=function(i){return c?i:function(c,i){try{var s=(o.current=e.Conversation.startSession(t({},null!=r?r:{},null!=n?n:{},{onModeChange:function(n){f(n.mode)},onStatusChange:function(n){l(n.status)}})),Promise.resolve(o.current).then(function(n){return u.current=n,u.current.getId()}))}catch(n){return i(!0,n)}return s&&s.then?s.then(i.bind(null,!1),i.bind(null,!0)):i(!1,s)}(0,function(n,e){if(o.current=null,n)throw e;return e})};if(u.current)return Promise.resolve(u.current.getId());var s=function(){if(o.current)return Promise.resolve(o.current).then(function(n){var e=n.getId();return c=1,e})}();return Promise.resolve(s&&s.then?s.then(i):i(s))}catch(n){return Promise.reject(n)}},endSession:function(){try{var n=u.current;return u.current=null,Promise.resolve(null==n?void 0:n.endSession()).then(function(){})}catch(n){return Promise.reject(n)}},setVolume:function(n){var e;null==(e=u.current)||e.setVolume({volume:n.volume})},getInputByteFrequencyData:function(){var n;return null==(n=u.current)?void 0:n.getInputByteFrequencyData()},getOutputByteFrequencyData:function(){var n;return null==(n=u.current)?void 0:n.getOutputByteFrequencyData()},getInputVolume:function(){var n,e;return null!=(n=null==(e=u.current)?void 0:e.getInputVolume())?n:0},getOutputVolume:function(){var n,e;return null!=(n=null==(e=u.current)?void 0:e.getOutputVolume())?n:0},status:i,isSpeaking:"speaking"===a}};
//# sourceMappingURL=lib.cjs.map
