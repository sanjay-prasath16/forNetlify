import{useRef as n,useState as t,useEffect as r}from"react";import{Conversation as e}from"@11labs/client";function u(){return u=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var e in r)({}).hasOwnProperty.call(r,e)&&(n[e]=r[e])}return n},u.apply(null,arguments)}function o(o){var c=n(null),i=n(null),l=t("disconnected"),a=l[0],s=l[1],f=t("listening"),v=f[0],m=f[1];return r(function(){return function(){var n;null==(n=c.current)||n.endSession()}},[]),{startSession:function(n){try{var t,r=function(r){return t?r:function(t,r){try{var l=(i.current=e.startSession(u({},null!=o?o:{},null!=n?n:{},{onModeChange:function(n){m(n.mode)},onStatusChange:function(n){s(n.status)}})),Promise.resolve(i.current).then(function(n){return c.current=n,c.current.getId()}))}catch(n){return r(!0,n)}return l&&l.then?l.then(r.bind(null,!1),r.bind(null,!0)):r(!1,l)}(0,function(n,t){if(i.current=null,n)throw t;return t})};if(c.current)return Promise.resolve(c.current.getId());var l=function(){if(i.current)return Promise.resolve(i.current).then(function(n){var r=n.getId();return t=1,r})}();return Promise.resolve(l&&l.then?l.then(r):r(l))}catch(n){return Promise.reject(n)}},endSession:function(){try{var n=c.current;return c.current=null,Promise.resolve(null==n?void 0:n.endSession()).then(function(){})}catch(n){return Promise.reject(n)}},setVolume:function(n){var t;null==(t=c.current)||t.setVolume({volume:n.volume})},getInputByteFrequencyData:function(){var n;return null==(n=c.current)?void 0:n.getInputByteFrequencyData()},getOutputByteFrequencyData:function(){var n;return null==(n=c.current)?void 0:n.getOutputByteFrequencyData()},getInputVolume:function(){var n,t;return null!=(n=null==(t=c.current)?void 0:t.getInputVolume())?n:0},getOutputVolume:function(){var n,t;return null!=(n=null==(t=c.current)?void 0:t.getOutputVolume())?n:0},status:a,isSpeaking:"speaking"===v}}export{o as useConversation};
//# sourceMappingURL=lib.module.js.map
